{"ast":null,"code":"const express = require('express');\nconst jwt = require('jsonwebtoken');\nconst Faculty = require('../models/Faculty');\nconst router = express.Router();\n\n// Middleware to verify token\nconst verifyToken = (req, res, next) => {\n  const token = req.header('Authorization');\n  if (!token) return res.status(401).json({\n    error: 'Access denied'\n  });\n  try {\n    const verified = jwt.verify(token, process.env.JWT_SECRET);\n    req.user = verified;\n    next();\n  } catch (err) {\n    res.status(400).json({\n      error: 'Invalid token'\n    });\n  }\n};\n\n// Get faculty profile\nrouter.get('/profile', verifyToken, async (req, res) => {\n  if (req.user.role !== 'faculty') return res.status(403).json({\n    error: 'Access denied'\n  });\n  try {\n    const faculty = await Faculty.findById(req.user.id);\n    res.json(faculty);\n  } catch (err) {\n    res.status(500).json({\n      error: err.message\n    });\n  }\n});\n\n// Get all students (for faculty management)\nrouter.get('/students', verifyToken, async (req, res) => {\n  if (req.user.role !== 'faculty') return res.status(403).json({\n    error: 'Access denied'\n  });\n  try {\n    const students = await Faculty.findById(req.user.id).populate('students');\n    res.json(students);\n  } catch (err) {\n    res.status(500).json({\n      error: err.message\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","jwt","Faculty","router","Router","verifyToken","req","res","next","token","header","status","json","error","verified","verify","process","env","JWT_SECRET","user","err","get","role","faculty","findById","id","message","students","populate","module","exports"],"sources":["C:/Users/HP/Desktop/smart attendance/client/src/routes/faculty.js"],"sourcesContent":["const express = require('express');\r\nconst jwt = require('jsonwebtoken');\r\nconst Faculty = require('../models/Faculty');\r\n\r\nconst router = express.Router();\r\n\r\n// Middleware to verify token\r\nconst verifyToken = (req, res, next) => {\r\n  const token = req.header('Authorization');\r\n  if (!token) return res.status(401).json({ error: 'Access denied' });\r\n\r\n  try {\r\n    const verified = jwt.verify(token, process.env.JWT_SECRET);\r\n    req.user = verified;\r\n    next();\r\n  } catch (err) {\r\n    res.status(400).json({ error: 'Invalid token' });\r\n  }\r\n};\r\n\r\n// Get faculty profile\r\nrouter.get('/profile', verifyToken, async (req, res) => {\r\n  if (req.user.role !== 'faculty') return res.status(403).json({ error: 'Access denied' });\r\n\r\n  try {\r\n    const faculty = await Faculty.findById(req.user.id);\r\n    res.json(faculty);\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\n// Get all students (for faculty management)\r\nrouter.get('/students', verifyToken, async (req, res) => {\r\n  if (req.user.role !== 'faculty') return res.status(403).json({ error: 'Access denied' });\r\n\r\n  try {\r\n    const students = await Faculty.findById(req.user.id).populate('students');\r\n    res.json(students);\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,GAAG,GAAGD,OAAO,CAAC,cAAc,CAAC;AACnC,MAAME,OAAO,GAAGF,OAAO,CAAC,mBAAmB,CAAC;AAE5C,MAAMG,MAAM,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;;AAE/B;AACA,MAAMC,WAAW,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACtC,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAM,CAAC,eAAe,CAAC;EACzC,IAAI,CAACD,KAAK,EAAE,OAAOF,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAE;EAAgB,CAAC,CAAC;EAEnE,IAAI;IACF,MAAMC,QAAQ,GAAGb,GAAG,CAACc,MAAM,CAACN,KAAK,EAAEO,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IAC1DZ,GAAG,CAACa,IAAI,GAAGL,QAAQ;IACnBN,IAAI,CAAC,CAAC;EACR,CAAC,CAAC,OAAOY,GAAG,EAAE;IACZb,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAgB,CAAC,CAAC;EAClD;AACF,CAAC;;AAED;AACAV,MAAM,CAACkB,GAAG,CAAC,UAAU,EAAEhB,WAAW,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtD,IAAID,GAAG,CAACa,IAAI,CAACG,IAAI,KAAK,SAAS,EAAE,OAAOf,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAE;EAAgB,CAAC,CAAC;EAExF,IAAI;IACF,MAAMU,OAAO,GAAG,MAAMrB,OAAO,CAACsB,QAAQ,CAAClB,GAAG,CAACa,IAAI,CAACM,EAAE,CAAC;IACnDlB,GAAG,CAACK,IAAI,CAACW,OAAO,CAAC;EACnB,CAAC,CAAC,OAAOH,GAAG,EAAE;IACZb,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEO,GAAG,CAACM;IAAQ,CAAC,CAAC;EAC9C;AACF,CAAC,CAAC;;AAEF;AACAvB,MAAM,CAACkB,GAAG,CAAC,WAAW,EAAEhB,WAAW,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACvD,IAAID,GAAG,CAACa,IAAI,CAACG,IAAI,KAAK,SAAS,EAAE,OAAOf,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAE;EAAgB,CAAC,CAAC;EAExF,IAAI;IACF,MAAMc,QAAQ,GAAG,MAAMzB,OAAO,CAACsB,QAAQ,CAAClB,GAAG,CAACa,IAAI,CAACM,EAAE,CAAC,CAACG,QAAQ,CAAC,UAAU,CAAC;IACzErB,GAAG,CAACK,IAAI,CAACe,QAAQ,CAAC;EACpB,CAAC,CAAC,OAAOP,GAAG,EAAE;IACZb,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEO,GAAG,CAACM;IAAQ,CAAC,CAAC;EAC9C;AACF,CAAC,CAAC;AAEFG,MAAM,CAACC,OAAO,GAAG3B,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}