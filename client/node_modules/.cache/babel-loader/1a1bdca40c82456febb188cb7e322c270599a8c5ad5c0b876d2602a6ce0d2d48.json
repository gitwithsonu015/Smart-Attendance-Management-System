{"ast":null,"code":"'use strict';\n\n/*!\n * ignore\n */\nmodule.exports = function saveSubdocs(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('save', false, async function saveSubdocsPreSave() {\n    if (this.$isSubdocument) {\n      return;\n    }\n    const subdocs = this.$getAllSubdocs({\n      useCache: true\n    });\n    if (!subdocs.length) {\n      return;\n    }\n    await Promise.all(subdocs.map(subdoc => subdoc._execDocumentPreHooks('save')));\n\n    // Invalidate subdocs cache because subdoc pre hooks can add new subdocuments\n    if (this.$__.saveOptions) {\n      this.$__.saveOptions.__subdocs = null;\n    }\n  }, null, unshift);\n  schema.s.hooks.pre('save', async function saveSubdocsPreDeleteOne() {\n    const removedSubdocs = this.$__.removedSubdocs;\n    if (!removedSubdocs || !removedSubdocs.length) {\n      return;\n    }\n    const promises = [];\n    for (const subdoc of removedSubdocs) {\n      promises.push(subdoc._execDocumentPreHooks('deleteOne'));\n    }\n    await Promise.all(promises);\n  });\n  schema.s.hooks.post('save', async function saveSubdocsPostDeleteOne() {\n    const removedSubdocs = this.$__.removedSubdocs;\n    if (!removedSubdocs || !removedSubdocs.length) {\n      return;\n    }\n    const promises = [];\n    for (const subdoc of removedSubdocs) {\n      promises.push(subdoc._execDocumentPostHooks('deleteOne'));\n    }\n    this.$__.removedSubdocs = null;\n    await Promise.all(promises);\n  });\n  schema.s.hooks.post('save', async function saveSubdocsPostSave() {\n    if (this.$isSubdocument) {\n      return;\n    }\n    const subdocs = this.$getAllSubdocs({\n      useCache: true\n    });\n    if (!subdocs.length) {\n      return;\n    }\n    const promises = [];\n    for (const subdoc of subdocs) {\n      promises.push(subdoc._execDocumentPostHooks('save'));\n    }\n    await Promise.all(promises);\n  }, null, unshift);\n};","map":{"version":3,"names":["module","exports","saveSubdocs","schema","unshift","s","hooks","pre","saveSubdocsPreSave","$isSubdocument","subdocs","$getAllSubdocs","useCache","length","Promise","all","map","subdoc","_execDocumentPreHooks","$__","saveOptions","__subdocs","saveSubdocsPreDeleteOne","removedSubdocs","promises","push","post","saveSubdocsPostDeleteOne","_execDocumentPostHooks","saveSubdocsPostSave"],"sources":["C:/Users/HP/Desktop/smart attendance/client/node_modules/mongoose/lib/plugins/saveSubdocs.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function saveSubdocs(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('save', false, async function saveSubdocsPreSave() {\n    if (this.$isSubdocument) {\n      return;\n    }\n\n    const subdocs = this.$getAllSubdocs({ useCache: true });\n\n    if (!subdocs.length) {\n      return;\n    }\n\n    await Promise.all(subdocs.map(subdoc => subdoc._execDocumentPreHooks('save')));\n\n    // Invalidate subdocs cache because subdoc pre hooks can add new subdocuments\n    if (this.$__.saveOptions) {\n      this.$__.saveOptions.__subdocs = null;\n    }\n  }, null, unshift);\n\n  schema.s.hooks.pre('save', async function saveSubdocsPreDeleteOne() {\n    const removedSubdocs = this.$__.removedSubdocs;\n    if (!removedSubdocs || !removedSubdocs.length) {\n      return;\n    }\n\n    const promises = [];\n    for (const subdoc of removedSubdocs) {\n      promises.push(subdoc._execDocumentPreHooks('deleteOne'));\n    }\n\n    await Promise.all(promises);\n  });\n\n  schema.s.hooks.post('save', async function saveSubdocsPostDeleteOne() {\n    const removedSubdocs = this.$__.removedSubdocs;\n    if (!removedSubdocs || !removedSubdocs.length) {\n      return;\n    }\n\n    const promises = [];\n    for (const subdoc of removedSubdocs) {\n      promises.push(subdoc._execDocumentPostHooks('deleteOne'));\n    }\n\n    this.$__.removedSubdocs = null;\n    await Promise.all(promises);\n  });\n\n  schema.s.hooks.post('save', async function saveSubdocsPostSave() {\n    if (this.$isSubdocument) {\n      return;\n    }\n\n    const subdocs = this.$getAllSubdocs({ useCache: true });\n\n    if (!subdocs.length) {\n      return;\n    }\n\n    const promises = [];\n    for (const subdoc of subdocs) {\n      promises.push(subdoc._execDocumentPostHooks('save'));\n    }\n\n    await Promise.all(promises);\n  }, null, unshift);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AAEAA,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,MAAM,EAAE;EAC5C,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,CAAC,CAACC,KAAK,CAACC,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,eAAeC,kBAAkBA,CAAA,EAAG;IACpE,IAAI,IAAI,CAACC,cAAc,EAAE;MACvB;IACF;IAEA,MAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAK,CAAC,CAAC;IAEvD,IAAI,CAACF,OAAO,CAACG,MAAM,EAAE;MACnB;IACF;IAEA,MAAMC,OAAO,CAACC,GAAG,CAACL,OAAO,CAACM,GAAG,CAACC,MAAM,IAAIA,MAAM,CAACC,qBAAqB,CAAC,MAAM,CAAC,CAAC,CAAC;;IAE9E;IACA,IAAI,IAAI,CAACC,GAAG,CAACC,WAAW,EAAE;MACxB,IAAI,CAACD,GAAG,CAACC,WAAW,CAACC,SAAS,GAAG,IAAI;IACvC;EACF,CAAC,EAAE,IAAI,EAAEjB,OAAO,CAAC;EAEjBD,MAAM,CAACE,CAAC,CAACC,KAAK,CAACC,GAAG,CAAC,MAAM,EAAE,eAAee,uBAAuBA,CAAA,EAAG;IAClE,MAAMC,cAAc,GAAG,IAAI,CAACJ,GAAG,CAACI,cAAc;IAC9C,IAAI,CAACA,cAAc,IAAI,CAACA,cAAc,CAACV,MAAM,EAAE;MAC7C;IACF;IAEA,MAAMW,QAAQ,GAAG,EAAE;IACnB,KAAK,MAAMP,MAAM,IAAIM,cAAc,EAAE;MACnCC,QAAQ,CAACC,IAAI,CAACR,MAAM,CAACC,qBAAqB,CAAC,WAAW,CAAC,CAAC;IAC1D;IAEA,MAAMJ,OAAO,CAACC,GAAG,CAACS,QAAQ,CAAC;EAC7B,CAAC,CAAC;EAEFrB,MAAM,CAACE,CAAC,CAACC,KAAK,CAACoB,IAAI,CAAC,MAAM,EAAE,eAAeC,wBAAwBA,CAAA,EAAG;IACpE,MAAMJ,cAAc,GAAG,IAAI,CAACJ,GAAG,CAACI,cAAc;IAC9C,IAAI,CAACA,cAAc,IAAI,CAACA,cAAc,CAACV,MAAM,EAAE;MAC7C;IACF;IAEA,MAAMW,QAAQ,GAAG,EAAE;IACnB,KAAK,MAAMP,MAAM,IAAIM,cAAc,EAAE;MACnCC,QAAQ,CAACC,IAAI,CAACR,MAAM,CAACW,sBAAsB,CAAC,WAAW,CAAC,CAAC;IAC3D;IAEA,IAAI,CAACT,GAAG,CAACI,cAAc,GAAG,IAAI;IAC9B,MAAMT,OAAO,CAACC,GAAG,CAACS,QAAQ,CAAC;EAC7B,CAAC,CAAC;EAEFrB,MAAM,CAACE,CAAC,CAACC,KAAK,CAACoB,IAAI,CAAC,MAAM,EAAE,eAAeG,mBAAmBA,CAAA,EAAG;IAC/D,IAAI,IAAI,CAACpB,cAAc,EAAE;MACvB;IACF;IAEA,MAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAK,CAAC,CAAC;IAEvD,IAAI,CAACF,OAAO,CAACG,MAAM,EAAE;MACnB;IACF;IAEA,MAAMW,QAAQ,GAAG,EAAE;IACnB,KAAK,MAAMP,MAAM,IAAIP,OAAO,EAAE;MAC5Bc,QAAQ,CAACC,IAAI,CAACR,MAAM,CAACW,sBAAsB,CAAC,MAAM,CAAC,CAAC;IACtD;IAEA,MAAMd,OAAO,CAACC,GAAG,CAACS,QAAQ,CAAC;EAC7B,CAAC,EAAE,IAAI,EAAEpB,OAAO,CAAC;AACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}